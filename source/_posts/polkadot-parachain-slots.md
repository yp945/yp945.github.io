---
title: 波卡平行链的插槽设计
date: 2019-06-04 20:48:34
permalink: polkadot-parachain-slots
category:
    - 跨链
    - Polkadot
tags: 
    - Polkadot
author: CANAAN
---

本文翻译自[链接](https://medium.com/polkadot-network/polkadot-parachain-slots-f3f051d41699)，文章虽然是讲平行链的设计，同时也深入阐述了波卡的经济体系设计，以及为什么项目会愿意参与波卡生态，共享用户。

<!--more -->

随着波卡主网即将上线，Web3 基金会收到越来越多关于平行链的问题：初始分配、如何成为一条平行链等等。本文会对平行链的设计草案进行解释，包括在如何在启动时做到公平分配，以及将来插槽数量如何增长。

我们之前发布过一个[波卡上的项目](https://forum.web3.foundation/t/teams-building-on-polkadot/67)文档，现在我们希望能够获得更多愿意参与平行链的开发团队和社区成员的反馈。

平行链租赁机制仍在演进中，以下只是目前最新的进展而非最终版本：

1、在链初始启动时，插槽数量较少，但会随着时间增加
2、我们会通过拍卖的方式出租插槽，拍卖的方式是 Candle Auction
3、每次出租的插槽的生命周期是有限的
4、小部分插槽会由Web3基金会保留一部分时间，给“common good”的平行链

> 注：理解 [Candle Auction](https://en.wikipedia.org/wiki/Candle_auction) 可以点击链接。


## Parachains 平行链是什么

Parachains 属于构成波卡的外部系统。
一个区块链有两种方式与波卡交互：通过原生的平行链，或者通过中继链。

部署原生的平行链，可以借助 [Cumulus](https://wiki.polkadot.network/en/latest/polkadot/build/cumulus/) （一个Substrate的插件）。
原生的平行链可以调用更快速的跨链消息机制，并与波卡共享安全性。
共享安全性的好处是可以避免通过增发来激励社区进行抵押挖矿，而同样能够获得很好的安全性。

但是如果该链有一些历史遗留的设计导致其无法完全使用波卡的底层框架，它可以保留自己的共识和最终性机制，通过平行链上的中继成为一个中继链。
中继链与波卡通信时，中继链的状态必须已经在自己的链上被敲定，然后才能给波卡传输消息。
很可能大量区块链会通过平行链的中继接入波卡，从而为平行链的插槽均摊成本。
![各种潜在的平行链通过 Relay 链进行连接](https://img.learnblockchain.cn/2019/06/15596526753958.jpg)
<p class="image-caption">各种潜在的平行链通过 Relay 链进行连接</p>

## 为什么平行链的数量是有限的

平行链需要资源来保证安全的运行。平行链的数量有限因为波卡网络的资源是有限的。这和其他链引入手续费或者其他资源来限制计算资源使用异曲同工。
目前在第一版波卡网络上有多少平行链还未最终确定。波卡白皮书中有提到，第一版波卡网络的性能还是有极大受限于新增插槽带来的消息队列次方级开销增长。
项目需要抵押 DOT 来获得平行链插槽，因此将无意义的平行链，接入的成本是很高的。

## 平行链的推出计划

随着优化的进行，平行链的数量将从初期的5，在1到2年内逐步增长到50至200之间。

具体的推出顺序：
1、保证 Relay 链的安全
2、优先让最有价值的项目加入
3、平衡平行链的供需关系，使得验证人有足够的经济激励
4、为更多实验性需求提供拓展性

## 创世平行链

波卡网络启动最初应该不会有大量平行链的存在，所以在启动初期插槽将由 Web3 基金会根据下面的条件来确定：

1、具有通用价值，比如中继链、智能合约链等
2、Web3 基金会会进行与 on-chain 相同逻辑的 off-chain 拍卖，运行团队来租用插槽，抵押最多 DOT 的团队将获得该插槽

通用价值链的类型包括：
1、[以太坊](https://learnblockchain.cn/2017/11/20/whatiseth/)中继
2、比特币中继
3、Edgeware，wasm的智能合约平台
4、其它关键基础设施，比如去中心化交易所或稳定币

更详细的方式可以查看 [Polkadot Wiki](https://wiki.polkadot.network/en/latest/polkadot/learn/auction/)

## 平行链竞拍机制

竞拍会持续进行，从而满足需要的项目都有机会参与。
当插槽需求增加时，波卡网络会通过链上治理来增加新插槽，反之亦然。
Candle-auction 将能够保证竞拍的安全性，因为没人能够知道竞拍的结束时间。

参与竞拍的项目包括希望目前的平行链希望延长租期，以及新的项目希望部署平行链。将来，平行链的账户可以直接通过智能合约参与竞拍，也就是说平行链社区可以通过众筹的形式共同来保证能够续租插槽，并从中获得收益。

## 获得平行链插槽的步骤

参与竞拍并非购买，只需抵押固定期限的DOT即可，本质上只是付出了通胀可能带来贬值的机会成本。当平行链插槽释放时，竞拍时抵押的DOT就可以获得返还。

出租周期被划分为【每6个月】，所有插槽的出租期同时开始和结束。
每次拍卖会包含4个出租周期，即2年时间。
需要租的项目可以根据自己的需要，自由的对这4个出租周期进行出价。
竞拍系统的机制是以两年为标准，最大化DOT的抵押数量。（具体逻辑本文不展开，有兴趣的读者可以参考英文原文）

## 参与竞拍

所有竞拍通过 DOT 进行。项目可以通过下面的方式获得 DOT：

1、创建自己的平行链通证，并通过市场交换获得 DOT
2、从市场上购买 DOT
3、众筹募集 DOT
4、向 Web3 基金会申请

多个项目也可以通过共享一个插槽的方式均摊成本。

## 平行链的成本

从 DOT 通证消耗的角度看，平行链是没有成本的。
对于需要购买 DOT 来获得插槽的项目来说，成本来自于持有 DOT 而非其他加密资产的机会成本。
一个成功的平行链首先必须给整个波卡网络增加有用功能，而跨链所能带来的网络效应则将超线性的放大该平行链的价值和用户基数。
所以成功的平行链应该会通过持有更多的DOT来保证长期的成功。

在波卡网络里，有4个地方需要DOT：
治理、平行链租赁、转账、Staking抵押。
抵押在平行链插槽租赁的DOT，将无法用于其他三个场景（治理有可能可以）。

波卡创始启动时，因为10%的年增发，Staking奖励的年化将达到20%。（以太坊启动初期的增发是30%每年，因为波卡的 BABE/GRANDPA 共识的消耗比以太坊的PoW低得多）。
当然基于风险偏好、领域知识、人工成本、Staking系统效率、DOT价格，20%只是理论最大值，实际上的机会成本会小得多。根据我们的初步模型，我们估计实际的平行链成本在 10-20万美金一年，在初期可能更小。

相比之下，[Cosmos](https://learnblockchain.cn/2019/05/21/what-is-cosmos/)/Tezos/EOS 的成本是上千万美元一年，以太坊和比特币的成本是几十亿美元。
因此在波卡上获取同样的安全性的成本比其它链小3到5个量级，而且还能够进行革命性的快速、无限制、无需信任的跨链消息传输。

目前市值排名前300的加密通证的市值都已经超过1000万美元，基本上每天的交易量都超过10万美元。
假设它们通过相对保守的2%年增发用于挖矿、Staking等费用，这意味这它们几乎都需要每年花费20万美元来保证安全。因此如果租赁波卡的平行链插槽，它们能够获得更高的性价比。

当然成为波卡网络的平行链所需付出的成本也是存在的。随着网络扩容，更多的平行链插槽、更多的中继会进一步降低成本。
总的来说，波卡共享安全性的模式会比通过自行组建节点的方式成本更低。

## 治理

波卡并不存在明确的机制来限制或者移除平行链，波卡本身是一个通过链上治理可不断升级的区块链。
争议和危害可能存在，但他需要获得各种利益相关的同意，其难度非常之高。
在区块链的语境里，治理是本小说，而波卡不可避免的是一场非常前沿的实验。

有缺陷的平行链（死循环、内存爆炸、垃圾消息）将会被验证人发现并禁止。这些离开波卡网络的平行链需要自行维护它的共识安全性。


本文作者：CANAAN ， 他的微信： yiheweixin2014 原文首发于：http://boka.network

[深入浅出区块链](https://learnblockchain.cn/) - 打造高质量区块链技术博客，学区块链都来这里，关注[知乎](https://www.zhihu.com/people/xiong-li-bing/activities)、[微博](https://weibo.com/517623789)。

